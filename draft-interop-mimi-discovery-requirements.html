<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>User Discovery Requirements</title>
<meta content="Giles Hogben" name="author">
<meta content="Femi Olumofin" name="author">
<meta content="Jon Peterson" name="author">
<meta content="Jonathan Rosenberg" name="author">
<meta content="
       This document defines requirements for the user discovery problem within the More Instant Messaging Interoperability (MIMI) working group. User discovery is essential for interoperability, allowing message senders to locate recipients across diverse platforms using globally unique, cross-service identifiers (e.g., email addresses, phone numbers). The core challenge involves reliably mapping these identifiers to messaging service providers and determining the reachability of a recipient's identifier across multiple providers. 
    " name="description">
<meta content="xml2rfc 3.24.0" name="generator">
<meta content="user discovery" name="keyword">
<meta content="interoperability" name="keyword">
<meta content="messaging" name="keyword">
<meta content="draft-interop-mimi-discovery-requirements-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.24.0
    Python 3.12.7
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.1.0
    Jinja2 3.1.4
    lxml 5.3.0
    platformdirs 4.3.6
    pycountry 22.3.5
    PyYAML 6.0.1
    requests 2.32.3
    setuptools 70.3.0
    wcwidth 0.2.13
-->
<link href="draft-interop-mimi-discovery-requirements.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  --font-title: "Sofia Sans Semi Condensed", sans-serif;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
section {
  clear: both;
}
.section-number {
  padding-right: 0.5em;
}
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-title);
  font-weight: 680;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
  vertical-align: top;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
  & :is(ol, ul) {
    margin-left: 1em;
  }
}
li {
  margin: 0 0 0.25em 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
  & li {
    margin-top: 0.5em;
  }
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  margin: 0 0 0 2em;
  & li {
    margin: 0;
    & :first-child { margin-top: 0; }
    & :last-child { margin-bottom: 0; }
  }
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
  &.olPercent {
    --indent: 5ch;
    & > dt {
      min-width: calc(var(--indent) - 2ch);
    }
  }
  &.olPercent > dt {
    float: none;
  }

  dl > dd > & {
    margin-top: 0.5em;
    margin-bottom: 0;
  }
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
  & > :is(:first-child, .break:first-child + *) {
    margin-top: 0;
  }
  & > :is(:last-child) {
    margin-bottom: 0;
  }
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
  caption-side: bottom;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: auto;
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
  &[href] {
    color: var(--pilcrow-weak);
    &:hover { text-decoration: none; }
  }
}
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
  & dt {
    width: var(--identifier-width);
    min-width: var(--identifier-width);
    clear: left;
    float: left;
    text-align: right;
    margin-right: 1ch;
  }
  & dd {
    margin: 0;
    margin-left: calc(1em + var(--identifier-width)) !important;
    min-width: 5em;
  }
  & .authors {
    & .author {
      display: inline-block;
      margin-right: 1.5em;
    }
    & .org {
      font-style: italic;
    }
  }
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;

  & nav {
    & ul {
      margin: 0 0.5em 0 0;
      padding: 0;
      list-style: none;
    }
    & li {
      line-height: 1.3em;
      margin: 2px 0;
      padding-left: 1.2em;
      text-indent: -1.2em;
    }
  }
  & a.xref {
    white-space: normal;
  }
}

.references {
  & > dt {
    text-align: right;
    font-weight: bold;
    min-width: 10ch;
    margin-right: 1.5ch;
    &:target::before {
      content: "⇒";
      margin: 0 10px 0 -25px;
    }
  }
  & > dd {
    margin-left: 12ch !important;
    overflow: visible;
    & .refInstance {
      margin-bottom: 0.8em;
    }
    & .ascii {
      margin-bottom: 0.25em;
    }
  }
}

#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  max-width: 20em;
  margin: 1em auto 1em 0;

  & .nameRole {
    font-weight: 700;
    margin-left: 0;
  }
  & .label {
    margin: 0.5em 0;
  }
  & .type {
    display: none;
  }
  & .alternative-contact {
    margin: 0.5em 0 0.25em 0;
  }
  & .non-ascii {
    margin: 0 0 0 2em;
  }
  & div.left {
    text-align: left;
  }
  & div.right {
    text-align: right;
  }
}

hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

/* Comments */
.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}

@media screen {
  #toc nav {
    font-family: var(--font-title);
    font-weight: 360;
    & > ul { margin-bottom: 2em; }
    & ul {
      margin: 0 0 0 4px;
      & :is(p, li) {
        margin: 2px 0;
      }
    }
  }
  #toc a.toplink {
    float: right;
  }
}
@media not screen {
  #toc a.toplink {
    display: none;
  }
}


/* TOC layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
    &::before { /* css hamburger */
      float: right;
      position: relative;
      width: 1em;
      height: 1px;
      left: -164px;
      margin: 8px 0 0 0;
      background: white none repeat scroll 0 0;
      box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
      content: "";
    }
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active {
    opacity: 1;
    & nav { display: block; }
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:is(:link, :focus, :hover),
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin: 2px 0.5em 0;
  }
}

/* TOC layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
  #toc a.toplink {
    margin: 8px 0.5em 0;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Discovery Requirements</td>
<td class="right">November 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Hogben, et al.</td>
<td class="center">Expires 1 June 2025</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">More Instant Messaging Interoperability (mimi)</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-interop-mimi-discovery-requirements-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-11-28" class="published">28 November 2024</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2025-06-01">1 June 2025</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">G. Hogben</div>
<div class="org">Google</div>
</div>
<div class="author">
      <div class="author-name">F. Olumofin</div>
<div class="org">Google</div>
</div>
<div class="author">
      <div class="author-name">J. Peterson</div>
<div class="org">TransUnion</div>
</div>
<div class="author">
      <div class="author-name">J. Rosenberg</div>
<div class="org">Five9</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">User Discovery Requirements</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines requirements for the user discovery problem within the More Instant Messaging Interoperability (MIMI) working group. User discovery is essential for interoperability, allowing message senders to locate recipients across diverse platforms using globally unique, cross-service identifiers (e.g., email addresses, phone numbers). The core challenge involves reliably mapping these identifiers to messaging service providers and determining the reachability of a recipient's identifier across multiple providers.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">
        The latest revision of this draft can be found at <span><a href="https://datatracker.ietf.org/doc/draft-interop-mimi-discovery-requirements/">https://datatracker.ietf.org/doc/draft-interop-mimi-discovery-requirements/</a></span>.
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-interop-mimi-discovery-requirements/">https://datatracker.ietf.org/doc/draft-interop-mimi-discovery-requirements/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        mimi Working Group mailing list (<span><a href="mailto:mimi@ietf.org">mailto:mimi@ietf.org</a></span>),
        which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/mimi/">https://mailarchive.ietf.org/arch/browse/mimi/</a></span>.
        Subscribe at <span><a href="https://www.ietf.org/mailman/listinfo/mimi/">https://www.ietf.org/mailman/listinfo/mimi/</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/femigolu/user-discovery">https://github.com/femigolu/user-discovery</a></span>.<a href="#section-note.1-4" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 1 June 2025.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-conventions-and-definitions" class="internal xref">Conventions and Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-user-discovery-problem-stat" class="internal xref">User Discovery Problem Statement</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-prior-efforts" class="internal xref">Prior Efforts</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-summary-of-requirements" class="internal xref">Summary of Requirements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-recipient-authorization-of-" class="internal xref">Recipient Authorization of Mappings</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-recipient-preferences-in-ma" class="internal xref">Recipient Preferences in Mappings</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-sender-retrieval-of-mapping" class="internal xref">Sender Retrieval of Mappings</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-mapping-authenticity-verifi" class="internal xref">Mapping Authenticity Verification</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-support-for-varying-mapping" class="internal xref">Support for Varying Mapping Results</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-protecting-sender-and-recip" class="internal xref">Protecting Sender and Recipient Privacy</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-in-transit-encryption" class="internal xref">In-Transit Encryption</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="auto internal xref">13</a>. <a href="#name-protection-against-enumerat" class="internal xref">Protection Against Enumeration Attacks</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="auto internal xref">14</a>. <a href="#name-mapping-removal" class="internal xref">Mapping Removal</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#section-15" class="auto internal xref">15</a>. <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#section-16" class="auto internal xref">16</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#section-17" class="auto internal xref">17</a>. <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-architectural-models" class="internal xref">Architectural Models</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.1">
                <p id="section-toc.1-1.18.2.1.1"><a href="#appendix-A.1" class="auto internal xref">A.1</a>.  <a href="#name-centralized-dp-monolithic-s" class="internal xref">Centralized DP (Monolithic Service)</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.1.2.1">
                    <p id="section-toc.1-1.18.2.1.2.1.1"><a href="#appendix-A.1.1" class="auto internal xref">A.1.1</a>.  <a href="#name-advantages" class="internal xref">Advantages</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.1.2.2">
                    <p id="section-toc.1-1.18.2.1.2.2.1"><a href="#appendix-A.1.2" class="auto internal xref">A.1.2</a>.  <a href="#name-drawbacks" class="internal xref">Drawbacks</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.2">
                <p id="section-toc.1-1.18.2.2.1"><a href="#appendix-A.2" class="auto internal xref">A.2</a>.  <a href="#name-hierarchical-dps-discovery-" class="internal xref">Hierarchical DPs (Discovery Resolvers)</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.2.2.1">
                    <p id="section-toc.1-1.18.2.2.2.1.1"><a href="#appendix-A.2.1" class="auto internal xref">A.2.1</a>.  <a href="#name-advantages-2" class="internal xref">Advantages</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.2.2.2">
                    <p id="section-toc.1-1.18.2.2.2.2.1"><a href="#appendix-A.2.2" class="auto internal xref">A.2.2</a>.  <a href="#name-drawbacks-2" class="internal xref">Drawbacks</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.3">
                <p id="section-toc.1-1.18.2.3.1"><a href="#appendix-A.3" class="auto internal xref">A.3</a>.  <a href="#name-federated-dps-distributed-p" class="internal xref">Federated DPs (Distributed Peer Service)</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.3.2.1">
                    <p id="section-toc.1-1.18.2.3.2.1.1"><a href="#appendix-A.3.1" class="auto internal xref">A.3.1</a>.  <a href="#name-advantages-3" class="internal xref">Advantages</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.3.2.2">
                    <p id="section-toc.1-1.18.2.3.2.2.1"><a href="#appendix-A.3.2" class="auto internal xref">A.3.2</a>.  <a href="#name-drawbacks-3" class="internal xref">Drawbacks</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.4">
                <p id="section-toc.1-1.18.2.4.1"><a href="#appendix-A.4" class="auto internal xref">A.4</a>.  <a href="#name-additional-considerations-o" class="internal xref">Additional Considerations on Architectural Models</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.4.2.1">
                    <p id="section-toc.1-1.18.2.4.2.1.1"><a href="#appendix-A.4.1" class="auto internal xref">A.4.1</a>.  <a href="#name-telephone-number-csis" class="internal xref">Telephone Number CSIs</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.4.2.2">
                    <p id="section-toc.1-1.18.2.4.2.2.1"><a href="#appendix-A.4.2" class="auto internal xref">A.4.2</a>.  <a href="#name-bias-mitigation" class="internal xref">Bias Mitigation</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-recipients-critical-user-jo" class="internal xref">Recipient's Critical User Journeys</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20">
            <p id="section-toc.1-1.20.1"><a href="#appendix-C" class="auto internal xref">Appendix C</a>.  <a href="#name-protecting-sender-recipient" class="internal xref">Protecting Sender-Recipient Social Graph Edge</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.21">
            <p id="section-toc.1-1.21.1"><a href="#appendix-D" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.22">
            <p id="section-toc.1-1.22.1"><a href="#appendix-E" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">MIMI user discovery enables a message sender to locate messaging service providers on which a particular recipient can be reached. Currently, users often need to ask contacts what service they are on out-of-band or try multiple services, which creates friction. Specifically, discovery helps a user on one messaging service (Alice on Service A) to find another user on a potentially different or the same service (Bob on Service B) without prior knowledge of Bob's provider, and in a provider-neutral manner.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Discovery is necessary because the identifiers we commonly have for contacts (phone numbers, email addresses, etc.) do not necessarily tell us which messaging service they are using. Someone with the email alice@gmail.com might use iMessage, Signal, or another service entirely. Thus, the core problem is how to take one of these cross-service identifiers and learn the messaging service provider that the user is using and how to communicate with them on that service.<a href="#section-1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conventions-and-definitions">
<section id="section-2">
      <h2 id="name-conventions-and-definitions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-and-definitions" class="section-name selfRef">Conventions and Definitions</a>
      </h2>
<p id="section-2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2-2">
<li id="section-2-2.1">
          <p id="section-2-2.1.1"><em>Cross-Service Identifier (CSI)</em>: A globally unique identifier for a user across multiple services (e.g., E.164 phone number, email address).<a href="#section-2-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.2">
          <p id="section-2-2.2.1"><em>Cross-Service Identifier Provider (CSIP)</em>: An entity that issues and manages CSIs (e.g., telecom providers, email providers).<a href="#section-2-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.3">
          <p id="section-2-2.3.1"><em>Messaging Service Provider (MSP)</em>: An entity offering messaging services to end users (e.g., WhatsApp, Signal, iMessage).<a href="#section-2-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.4">
          <p id="section-2-2.4.1"><em>Service Specific Identifier (SSI)</em>: A unique identifier for a user within a single MSP (e.g., a Twitter handle).<a href="#section-2-2.4.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.5">
          <p id="section-2-2.5.1"><em>Discovery Provider (DP)</em>: An entity that stores and facilitates the discovery of MSPs for a given CSI. A DP may be operated by an MSP or a third party.<a href="#section-2-2.5.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.6">
          <p id="section-2-2.6.1"><em>Verifiable Mapping</em>: A representation of the cryptographic binding of a CSI and the set of MSPs where the CSI is reachable.<a href="#section-2-2.6.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.7">
          <p id="section-2-2.7.1"><em>Recipient</em>: A user who possesses a CSI that has been assigned by a CSIP and authorizes verifiable mapping of that CSI to an MSP set.<a href="#section-2-2.7.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.8">
          <p id="section-2-2.8.1"><em>Sender</em>: A user who queries a DP to discover the MSPs for a given CSI.<a href="#section-2-2.8.1" class="pilcrow">¶</a></p>
</li>
      </ol>
</section>
</div>
<div id="user-discovery-problem-statement">
<section id="section-3">
      <h2 id="name-user-discovery-problem-stat">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-user-discovery-problem-stat" class="section-name selfRef">User Discovery Problem Statement</a>
      </h2>
<p id="section-3-1">User discovery involves two key aspects:<a href="#section-3-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3-2">
<li id="section-3-2.1">
          <p id="section-3-2.1.1"><em>Authorization</em>: Recipients must be able to authorize verifiable mappings between their CSIs and their chosen MSPs.<a href="#section-3-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-3-2.2">
          <p id="section-3-2.2.1"><em>Lookup</em>: Senders must be able to query these mappings to determine where a recipient can be reached.<a href="#section-3-2.2.1" class="pilcrow">¶</a></p>
</li>
      </ol>
<p id="section-3-3">To authorize verifiable mappings, the recipient must:<a href="#section-3-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-4.1">
          <p id="section-3-4.1.1">Possess a valid, CSIP-issued CSI.<a href="#section-3-4.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-4.2">
          <p id="section-3-4.2.1">Have active accounts with each MSP to be mapped.<a href="#section-3-4.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-4.3">
          <p id="section-3-4.3.1">Associate the CSI with each of those accounts.<a href="#section-3-4.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-3-5">Discovered mappings must be verifiable to ensure they are accurate. Crucially, discovery must prioritize user privacy, allowing users to control their discoverability, and it must integrate well with end-to-end encryption and other MIMI protocols.<a href="#section-3-5" class="pilcrow">¶</a></p>
<p id="section-3-6"><strong>Note:</strong> This document focuses on discovering <em>which</em> MSPs a user is on. Retrieving SSIs and cryptographic keys can be a separate, subsequent step.<a href="#section-3-6" class="pilcrow">¶</a></p>
<p id="section-3-7">The rest of this document describes a series of requirements for the discovery problem.<a href="#section-3-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prior-efforts">
<section id="section-4">
      <h2 id="name-prior-efforts">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-prior-efforts" class="section-name selfRef">Prior Efforts</a>
      </h2>
<p id="section-4-1">Discovery services are far from new on the Internet. The whois protocol <span>[<a href="#RFC3912" class="cite xref">RFC3912</a>]</span>, largely focused on mapping domain names to associated services, was one of the earliest discovery services deployed on the Internet. DNS SRV records, specified in <span>[<a href="#RFC2782" class="cite xref">RFC2782</a>]</span>, allow a similar process - given a domain name, a user can discover available services, such as VoIP based on the Session Initiation Protocol (SIP) <span>[<a href="#RFC3261" class="cite xref">RFC3261</a>]</span> <span>[<a href="#RFC3263" class="cite xref">RFC3263</a>]</span>. SRV records were adapted specifically for messaging in <span>[<a href="#RFC3861" class="cite xref">RFC3861</a>]</span>. However, both whois and DNS SRV records rely on domain names as lookup keys, making them unsuitable for identifiers like mobile phone numbers, which don't have inherent domain associations.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">ENUM <span>[<a href="#RFC6117" class="cite xref">RFC6117</a>]</span> addressed this limitation. It used DNS to look up phone numbers by reversing the digits and adding the "e164.arpa" suffix. This allowed delegation of portions of the namespace to telecom providers who owned specific number prefixes. While technically straightforward, public deployment of ENUM was hampered by challenges in establishing authority for prefixes. However, private ENUM <span>[<a href="#RFC6116" class="cite xref">RFC6116</a>]</span> services have become relatively common, facilitating functions like MMS routing within messaging.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">Another attempt was ViPR (Verification Involving PSTN Reachability) <span>[<a href="#I-D.rosenberg-dispatch-vipr-overview" class="cite xref">I-D.rosenberg-dispatch-vipr-overview</a>]</span> <span>[<a href="#I-D.petithuguenin-vipr-pvp" class="cite xref">I-D.petithuguenin-vipr-pvp</a>]</span>. ViPR utilized a peer-to-peer network based on RELOAD (Resource Location and Discovery) <span>[<a href="#RFC6940" class="cite xref">RFC6940</a>]</span> to operate between enterprises. It addressed the authority problem by authorizing records based on proof of forward routability but faced the same network effects issue as ENUM. ViPR attempted to address incentive problems by focusing on enterprises seeking cost savings by bypassing the phone network. Ultimately, network effects challenges (among other protocol-unrelated issues) prevented widespread deployment.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">Discovery and lookup services are now commonplace on the Internet but are largely scoped within large providers such as Facebook, Twitter, WhatsApp, and others.<a href="#section-4-4" class="pilcrow">¶</a></p>
<p id="section-4-5">The MIMI discovery service requires a solution that works across providers.<a href="#section-4-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="summary-of-requirements">
<section id="section-5">
      <h2 id="name-summary-of-requirements">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-summary-of-requirements" class="section-name selfRef">Summary of Requirements</a>
      </h2>
<p id="section-5-1">This section provides a summary of the requirements for MIMI user discovery.<a href="#section-5-1" class="pilcrow">¶</a></p>
<table class="center" id="table-1">
        <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">#</th>
            <th class="text-left" rowspan="1" colspan="1">Requirement</th>
            <th class="text-left" rowspan="1" colspan="1">Mandatory</th>
            <th class="text-left" rowspan="1" colspan="1">Optional</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1"> </td>
            <td class="text-left" rowspan="1" colspan="1">
              <strong>Recipients</strong>
</td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">R1</td>
            <td class="text-left" rowspan="1" colspan="1">Only the recipient <span class="bcp14">MUST</span> be able to authorize verifiable mapping of the recipient's CSI to an MSP set</td>
            <td class="text-left" rowspan="1" colspan="1">x</td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">R2</td>
            <td class="text-left" rowspan="1" colspan="1">A mapping <span class="bcp14">MUST</span> allow for the inclusion of tags or similar constructs to indicate the recipient's preferences for using each included MSP</td>
            <td class="text-left" rowspan="1" colspan="1">x</td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1"> </td>
            <td class="text-left" rowspan="1" colspan="1">
              <strong>Senders</strong>
</td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">R3</td>
            <td class="text-left" rowspan="1" colspan="1">Senders <span class="bcp14">MUST</span> be able to retrieve all verifiable mappings for a CSI</td>
            <td class="text-left" rowspan="1" colspan="1">x</td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">R4</td>
            <td class="text-left" rowspan="1" colspan="1">Senders <span class="bcp14">MUST</span> be able to verify the authenticity of mappings</td>
            <td class="text-left" rowspan="1" colspan="1">x</td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1"> </td>
            <td class="text-left" rowspan="1" colspan="1">
              <strong>Discovery Provider</strong>
</td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">R5</td>
            <td class="text-left" rowspan="1" colspan="1">Discovery <span class="bcp14">MUST</span> support results with zero, one, or multiple mappings</td>
            <td class="text-left" rowspan="1" colspan="1">x</td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">R6</td>
            <td class="text-left" rowspan="1" colspan="1">DPs <span class="bcp14">MUST NOT</span> be able to learn both the sender's identity and the recipient's CSI</td>
            <td class="text-left" rowspan="1" colspan="1">x</td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">R7</td>
            <td class="text-left" rowspan="1" colspan="1">All data exchanged in the processing of a discovery request <span class="bcp14">MUST</span> be encrypted in transit</td>
            <td class="text-left" rowspan="1" colspan="1">x</td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">R8</td>
            <td class="text-left" rowspan="1" colspan="1">DPs <span class="bcp14">SHOULD</span> be protected against enumeration attacks</td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
            <td class="text-left" rowspan="1" colspan="1">x</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">R9</td>
            <td class="text-left" rowspan="1" colspan="1">DPs <span class="bcp14">MUST</span> provide a way to remove mappings</td>
            <td class="text-left" rowspan="1" colspan="1">x</td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">R10</td>
            <td class="text-left" rowspan="1" colspan="1">Only the recipient or the CSIP <span class="bcp14">SHOULD</span> be able to remove mappings</td>
            <td class="text-left" rowspan="1" colspan="1"> </td>
            <td class="text-left" rowspan="1" colspan="1">x</td>
          </tr>
        </tbody>
      </table>
</section>
</div>
<div id="recipient-authorization-of-mappings">
<section id="section-6">
      <h2 id="name-recipient-authorization-of-">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-recipient-authorization-of-" class="section-name selfRef">Recipient Authorization of Mappings</a>
      </h2>
<p id="section-6-1"><em>R1: Only the recipient <span class="bcp14">MUST</span> be able to authorize verifiable mapping of the recipient's CSI to an MSP set.</em><a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">This requirement prevents unauthorized mapping and potential impersonation attacks. The integrity of mappings requires the recipient to be the sole party to authorize mappings of the recipient's CSI to the designated MSP set. Allowing any other user besides the recipient to authorize the creation of verifiable mappings could open the recipient to impersonation attacks, where the MSP set will include MSPs where the attacker controls the accounts.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">It is expected that the recipient has active accounts with each MSP in the set and has already linked the CSI with each of those MSP accounts. If a recipient includes MSPs that do not meet these preconditions, the recipient will not be reachable on the incorrect MSPs. While this problem can be resolved if each MSP participates in creating verifiable mappings to confirm the recipient's account exists, mapping creation will be more involved. Hence, this issue is deferred as a post-discovery problem to address.<a href="#section-6-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="recipient-preferences-in-mappings">
<section id="section-7">
      <h2 id="name-recipient-preferences-in-ma">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-recipient-preferences-in-ma" class="section-name selfRef">Recipient Preferences in Mappings</a>
      </h2>
<p id="section-7-1"><em>R2: A mapping <span class="bcp14">MUST</span> allow for the inclusion of tags or similar constructs to indicate the recipient's preferences for using each included MSP.</em><a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">This requirement allows recipients to guide how senders contact them on different MSPs. For example, a preference tag may be formulated as closed or open-ended strings (e.g., "Business", "Personal", "BasketballFriends", "WhatsApp") or a list (e.g., "Business, WhatsApp"). A recipient might want senders to utilize a specific "Business" mapping for business messaging and a different one for other types of messaging.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">This requirement prioritizes recipient preferences because senders already have flexibility in choosing their MSP (and potentially DP) when initiating requests. Further considerations regarding sender and DP preferences, as well as more complex recipient preferences, are deemed to be implementation issues. See Appendix B: Recipient's Critical User Journeys for some more examples for recipients.<a href="#section-7-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sender-retrieval-of-mappings">
<section id="section-8">
      <h2 id="name-sender-retrieval-of-mapping">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-sender-retrieval-of-mapping" class="section-name selfRef">Sender Retrieval of Mappings</a>
      </h2>
<p id="section-8-1"><em>R3: Senders <span class="bcp14">MUST</span> be able to retrieve all verifiable mappings for a CSI.</em><a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">This requirement ensures senders have complete information for reaching a recipient. When a sender queries for mappings established for a given recipient's CSI, all available verifiable mappings that exist must be returned as a response.<a href="#section-8-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mapping-authenticity-verification">
<section id="section-9">
      <h2 id="name-mapping-authenticity-verifi">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-mapping-authenticity-verifi" class="section-name selfRef">Mapping Authenticity Verification</a>
      </h2>
<p id="section-9-1"><em>R4: Senders <span class="bcp14">MUST</span> be able to verify the authenticity of mappings.</em><a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">This requirement enables senders to trust the mapping information. On receipt of the mappings that exist for a recipient's CSI, the sender should have a means to verify the authenticity of the mappings by learning that the recipient authorized that mapping. The verification process may leverage all or parts of the mapping content and may involve network calls to an oracle to help with the verification, provided the oracle query process is consistent with Requirement 6.<a href="#section-9-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="support-for-varying-mapping-results">
<section id="section-10">
      <h2 id="name-support-for-varying-mapping">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-support-for-varying-mapping" class="section-name selfRef">Support for Varying Mapping Results</a>
      </h2>
<p id="section-10-1"><em>R5: Discovery <span class="bcp14">MUST</span> support results with zero, one, or multiple mappings.</em><a href="#section-10-1" class="pilcrow">¶</a></p>
<p id="section-10-2">This requirement covers cases where a user has no mappings, has opted out of discovery, or uses multiple MSPs. Regardless of how the verifiable mapping structure is represented (e.g., one CSI to a set of MSPs, or one CSI to one MSP repeated for each MSP), senders must be able to determine the following from a user discovery response for a given CSI:<a href="#section-10-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-10-3.1">
          <p id="section-10-3.1.1">No mapping exists, e.g., the recipient has not created any mapping.<a href="#section-10-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-10-3.2">
          <p id="section-10-3.2.1">One or more mappings exist, but without listed MSPs, e.g., the recipient has intentionally configured discovery to return no mappings.<a href="#section-10-3.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-10-3.3">
          <p id="section-10-3.3.1">One mapping exists with one listed MSP.<a href="#section-10-3.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-10-3.4">
          <p id="section-10-3.4.1">One mapping exists with multiple listed MSPs.<a href="#section-10-3.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-10-3.5">
          <p id="section-10-3.5.1">Multiple mappings exist, each potentially with a different number of MSPs.<a href="#section-10-3.5.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-10-4">In situations where the recipient who authorized mappings using a CSI, such as an email address, becomes unreachable (e.g., due to the user's death), implementations can rely on the MSPs included in the mapping to resolve non-reachability issues outside user discovery.<a href="#section-10-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="protecting-sender-and-recipient-privacy">
<section id="section-11">
      <h2 id="name-protecting-sender-and-recip">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-protecting-sender-and-recip" class="section-name selfRef">Protecting Sender and Recipient Privacy</a>
      </h2>
<p id="section-11-1"><em>R6: DPs <span class="bcp14">MUST NOT</span> be able to learn both the sender's identity and the recipient's CSI.</em><a href="#section-11-1" class="pilcrow">¶</a></p>
<p id="section-11-2">This requirement prevents the DP from building a complete social graph of users across MSPs. This protects user privacy by limiting the information the DP can gather about relationships between senders and recipients.<a href="#section-11-2" class="pilcrow">¶</a></p>
<p id="section-11-3">User discovery lookups inherently create a connection point (an edge) on the social graph between the sender and the recipient. To protect the privacy of both parties, the DP must be prevented from learning this connection consisting of the sender's identity and the recipient's CSI/mapping. Specifically, the DP can learn at most one of the following:<a href="#section-11-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-11-4">
<li id="section-11-4.1">
          <p id="section-11-4.1.1">Identifying information about the sender, such as their source IP address, username, etc.<a href="#section-11-4.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-11-4.2">
          <p id="section-11-4.2.1">The recipient's CSI and any associated response mappings.<a href="#section-11-4.2.1" class="pilcrow">¶</a></p>
</li>
      </ol>
<p id="section-11-5">While the DP might be able to infer this edge or connection later if both users communicate through the same MSP, this requirement focuses on preventing the DP from directly learning this during discovery. To understand the importance of this, it's helpful to distinguish between two types of social graphs:<a href="#section-11-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11-6.1">
          <p id="section-11-6.1.1">Messaging social graph: Reflects actual communication between users.<a href="#section-11-6.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-11-6.2">
          <p id="section-11-6.2.1">Discovery social graph: Encompasses all attempted user discovery lookups, which can be significantly larger than the messaging social graph, as it includes searches for users the sender may not ultimately contact.<a href="#section-11-6.2.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-11-7">Protecting user privacy during discovery is crucial because, without it, a sender's entire discovery social graph could be revealed during bulk discovery that requires the lookup of all contacts on the sender's address book, which exposes a much broader range of potential connections than their actual messaging activity. Appendix C Protecting Sender-Recipient Social Graph Edge has some recommendations for implementation.<a href="#section-11-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="in-transit-encryption">
<section id="section-12">
      <h2 id="name-in-transit-encryption">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-in-transit-encryption" class="section-name selfRef">In-Transit Encryption</a>
      </h2>
<p id="section-12-1"><em>R7: All data exchanged in the processing of a discovery request <span class="bcp14">MUST</span> be encrypted in transit.</em><a href="#section-12-1" class="pilcrow">¶</a></p>
<p id="section-12-2">This requirement ensures the confidentiality of discovery requests and responses.<a href="#section-12-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="protection-against-enumeration-attacks">
<section id="section-13">
      <h2 id="name-protection-against-enumerat">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-protection-against-enumerat" class="section-name selfRef">Protection Against Enumeration Attacks</a>
      </h2>
<p id="section-13-1"><em>R8: DPs <span class="bcp14">SHOULD</span> be protected against enumeration attacks.</em><a href="#section-13-1" class="pilcrow">¶</a></p>
<p id="section-13-2">This requirement ensures there is a security defense against attacks aimed at scraping mapping data. Discovery providers should implement mechanisms to defend against large-scale scraping of mappings from their database, which can be used to compile spam targeting lists.<a href="#section-13-2" class="pilcrow">¶</a></p>
<p id="section-13-3">One potential implementation approach is to utilize time-bound blind signatures. This method limits the number of user discovery lookups a sender can perform within a given timeframe. Each lookup request must include a unique, unblinded signature that cannot be linked to the sender's identity. To facilitate rate-limiting across different server entities (e.g., DPs and MSPs), this unique signature should be passed along during communication.<a href="#section-13-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mapping-removal">
<section id="section-14">
      <h2 id="name-mapping-removal">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-mapping-removal" class="section-name selfRef">Mapping Removal</a>
      </h2>
<p id="section-14-1"><em>R9: DPs <span class="bcp14">MUST</span> provide a way to remove mappings.</em><a href="#section-14-1" class="pilcrow">¶</a></p>
<p id="section-14-2"><em>R10: Only the recipient or the CSIP <span class="bcp14">SHOULD</span> be able to remove mappings</em><a href="#section-14-2" class="pilcrow">¶</a></p>
<p id="section-14-3">These requirements allow recipients to manage their discoverability and remove outdated mappings. Authorization to remove verifiable mappings for a given CSI should be limited to only the recipient who authorized the mapping or the CSIP managing that CSI (for cases where a CSI is no longer assigned to any recipient).<a href="#section-14-3" class="pilcrow">¶</a></p>
<p id="section-14-4">Recipients can change their minds and decide to make a prior mapping not discoverable; they may want to update mappings or start all over. Thus, a DP should provide a means to remove verifiable mappings. Once removed, a mapping should no longer be returned for senders' requests.<a href="#section-14-4" class="pilcrow">¶</a></p>
<p id="section-14-5">A recipient that authorized the creation of a verifiable mapping should also be able to authorize its removal from the backend of DPs. Similarly, a CSIP may request the removal of mappings for a CSI that has become unassigned.<a href="#section-14-5" class="pilcrow">¶</a></p>
<p id="section-14-6">A possible implementation approach is for verifiable mapping authorization to include a bit that the recipient can use to indicate if a mapping is new. When that bit is set, a DP may proactively de-list any existing mapping for that CSI (after asking the user to re-confirm). Note that the CSIP does not need to be aware of or be involved with the de-listing of mappings with such an approach. There are other approaches to ensure mappings are fresh and are not impacted when the same CSI is transferred between two recipients.<a href="#section-14-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-15">
      <h2 id="name-security-considerations">
<a href="#section-15" class="section-number selfRef">15. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-15-1">Security considerations are addressed throughout the document, particularly in requirements R1, R4, R6, R7, and R8. These requirements focus on preventing unauthorized mapping, ensuring the authenticity of mappings, protecting user privacy, and securing data in transit and at rest.<a href="#section-15-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-16">
      <h2 id="name-iana-considerations">
<a href="#section-16" class="section-number selfRef">16. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-16-1">This document has no IANA actions.<a href="#section-16-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-normative-references">
<section id="section-17">
      <h2 id="name-normative-references">
<a href="#section-17" class="section-number selfRef">17. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="I-D.petithuguenin-vipr-pvp">[I-D.petithuguenin-vipr-pvp]</dt>
      <dd>
<span class="refAuthor">Petit-Huguenin, M.</span>, <span class="refAuthor">Rosenberg, J.</span>, and <span class="refAuthor">C. F. Jennings</span>, <span class="refTitle">"The Public Switched Telephone Network (PSTN) Validation Protocol (PVP)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-petithuguenin-vipr-pvp-04</span>, <time datetime="2012-03-12" class="refDate">12 March 2012</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-petithuguenin-vipr-pvp-04">https://datatracker.ietf.org/doc/html/draft-petithuguenin-vipr-pvp-04</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.rosenberg-dispatch-vipr-overview">[I-D.rosenberg-dispatch-vipr-overview]</dt>
      <dd>
<span class="refAuthor">Rosenberg, J.</span>, <span class="refAuthor">Jennings, C. F.</span>, and <span class="refAuthor">M. Petit-Huguenin</span>, <span class="refTitle">"Verification Involving PSTN Reachability: Requirements and Architecture Overview"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-rosenberg-dispatch-vipr-overview-04</span>, <time datetime="2010-10-25" class="refDate">25 October 2010</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-rosenberg-dispatch-vipr-overview-04">https://datatracker.ietf.org/doc/html/draft-rosenberg-dispatch-vipr-overview-04</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2782">[RFC2782]</dt>
      <dd>
<span class="refAuthor">Gulbrandsen, A.</span>, <span class="refAuthor">Vixie, P.</span>, and <span class="refAuthor">L. Esibov</span>, <span class="refTitle">"A DNS RR for specifying the location of services (DNS SRV)"</span>, <span class="seriesInfo">RFC 2782</span>, <span class="seriesInfo">DOI 10.17487/RFC2782</span>, <time datetime="2000-02" class="refDate">February 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2782">https://www.rfc-editor.org/rfc/rfc2782</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3261">[RFC3261]</dt>
      <dd>
<span class="refAuthor">Rosenberg, J.</span>, <span class="refAuthor">Schulzrinne, H.</span>, <span class="refAuthor">Camarillo, G.</span>, <span class="refAuthor">Johnston, A.</span>, <span class="refAuthor">Peterson, J.</span>, <span class="refAuthor">Sparks, R.</span>, <span class="refAuthor">Handley, M.</span>, and <span class="refAuthor">E. Schooler</span>, <span class="refTitle">"SIP: Session Initiation Protocol"</span>, <span class="seriesInfo">RFC 3261</span>, <span class="seriesInfo">DOI 10.17487/RFC3261</span>, <time datetime="2002-06" class="refDate">June 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3261">https://www.rfc-editor.org/rfc/rfc3261</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3263">[RFC3263]</dt>
      <dd>
<span class="refAuthor">Rosenberg, J.</span> and <span class="refAuthor">H. Schulzrinne</span>, <span class="refTitle">"Session Initiation Protocol (SIP): Locating SIP Servers"</span>, <span class="seriesInfo">RFC 3263</span>, <span class="seriesInfo">DOI 10.17487/RFC3263</span>, <time datetime="2002-06" class="refDate">June 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3263">https://www.rfc-editor.org/rfc/rfc3263</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3861">[RFC3861]</dt>
      <dd>
<span class="refAuthor">Peterson, J.</span>, <span class="refTitle">"Address Resolution for Instant Messaging and Presence"</span>, <span class="seriesInfo">RFC 3861</span>, <span class="seriesInfo">DOI 10.17487/RFC3861</span>, <time datetime="2004-08" class="refDate">August 2004</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3861">https://www.rfc-editor.org/rfc/rfc3861</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3912">[RFC3912]</dt>
      <dd>
<span class="refAuthor">Daigle, L.</span>, <span class="refTitle">"WHOIS Protocol Specification"</span>, <span class="seriesInfo">RFC 3912</span>, <span class="seriesInfo">DOI 10.17487/RFC3912</span>, <time datetime="2004-09" class="refDate">September 2004</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3912">https://www.rfc-editor.org/rfc/rfc3912</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5222">[RFC5222]</dt>
      <dd>
<span class="refAuthor">Hardie, T.</span>, <span class="refAuthor">Newton, A.</span>, <span class="refAuthor">Schulzrinne, H.</span>, and <span class="refAuthor">H. Tschofenig</span>, <span class="refTitle">"LoST: A Location-to-Service Translation Protocol"</span>, <span class="seriesInfo">RFC 5222</span>, <span class="seriesInfo">DOI 10.17487/RFC5222</span>, <time datetime="2008-08" class="refDate">August 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5222">https://www.rfc-editor.org/rfc/rfc5222</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6116">[RFC6116]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refAuthor">Conroy, L.</span>, and <span class="refAuthor">K. Fujiwara</span>, <span class="refTitle">"The E.164 to Uniform Resource Identifiers (URI) Dynamic Delegation Discovery System (DDDS) Application (ENUM)"</span>, <span class="seriesInfo">RFC 6116</span>, <span class="seriesInfo">DOI 10.17487/RFC6116</span>, <time datetime="2011-03" class="refDate">March 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6116">https://www.rfc-editor.org/rfc/rfc6116</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6117">[RFC6117]</dt>
      <dd>
<span class="refAuthor">Hoeneisen, B.</span>, <span class="refAuthor">Mayrhofer, A.</span>, and <span class="refAuthor">J. Livingood</span>, <span class="refTitle">"IANA Registration of Enumservices: Guide, Template, and IANA Considerations"</span>, <span class="seriesInfo">RFC 6117</span>, <span class="seriesInfo">DOI 10.17487/RFC6117</span>, <time datetime="2011-03" class="refDate">March 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6117">https://www.rfc-editor.org/rfc/rfc6117</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6376">[RFC6376]</dt>
      <dd>
<span class="refAuthor">Crocker, D., Ed.</span>, <span class="refAuthor">Hansen, T., Ed.</span>, and <span class="refAuthor">M. Kucherawy, Ed.</span>, <span class="refTitle">"DomainKeys Identified Mail (DKIM) Signatures"</span>, <span class="seriesInfo">STD 76</span>, <span class="seriesInfo">RFC 6376</span>, <span class="seriesInfo">DOI 10.17487/RFC6376</span>, <time datetime="2011-09" class="refDate">September 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6376">https://www.rfc-editor.org/rfc/rfc6376</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6940">[RFC6940]</dt>
      <dd>
<span class="refAuthor">Jennings, C.</span>, <span class="refAuthor">Lowekamp, B., Ed.</span>, <span class="refAuthor">Rescorla, E.</span>, <span class="refAuthor">Baset, S.</span>, and <span class="refAuthor">H. Schulzrinne</span>, <span class="refTitle">"REsource LOcation And Discovery (RELOAD) Base Protocol"</span>, <span class="seriesInfo">RFC 6940</span>, <span class="seriesInfo">DOI 10.17487/RFC6940</span>, <time datetime="2014-01" class="refDate">January 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6940">https://www.rfc-editor.org/rfc/rfc6940</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8616">[RFC8616]</dt>
    <dd>
<span class="refAuthor">Levine, J.</span>, <span class="refTitle">"Email Authentication for Internationalized Mail"</span>, <span class="seriesInfo">RFC 8616</span>, <span class="seriesInfo">DOI 10.17487/RFC8616</span>, <time datetime="2019-06" class="refDate">June 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8616">https://www.rfc-editor.org/rfc/rfc8616</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="architectural-models">
<section id="appendix-A">
      <h2 id="name-architectural-models">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-architectural-models" class="section-name selfRef">Architectural Models</a>
      </h2>
<p id="appendix-A-1">This appendix explores various architectural models for MIMI DP to provide an overview and address practical implementation considerations. The working group observed these requirements are similar among these models and opted to maintain architectural neutrality for the discovery protocol. However, we will outline requirements for the roles of DPs, how they interact with each other, MSPs in a federated model, and how DPs accommodate queries from both MSPs and users.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<div id="centralized-dp-monolithic-service">
<section id="appendix-A.1">
        <h3 id="name-centralized-dp-monolithic-s">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-centralized-dp-monolithic-s" class="section-name selfRef">Centralized DP (Monolithic Service)</a>
        </h3>
<p id="appendix-A.1-1">A globally accessible, authoritative database (potentially sharded/replicated) stores all authenticated CSI mappings. This monolithic service, implemented across synchronized global nodes, handles all CSI queries from messaging platforms and acts as the single source of truth for mapping data, even if certain mappings may be restricted in specific regions due to geopolitical considerations.<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
<div id="advantages">
<section id="appendix-A.1.1">
          <h4 id="name-advantages">
<a href="#appendix-A.1.1" class="section-number selfRef">A.1.1. </a><a href="#name-advantages" class="section-name selfRef">Advantages</a>
          </h4>
<ul class="normal">
<li class="normal" id="appendix-A.1.1-1.1">
              <p id="appendix-A.1.1-1.1.1">Standardization and uniform control over mapping creation, updates, and data formats.<a href="#appendix-A.1.1-1.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.1.1-1.2">
              <p id="appendix-A.1.1-1.2.1">Promotes fair and unbiased CSI mapping discovery.<a href="#appendix-A.1.1-1.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.1.1-1.3">
              <p id="appendix-A.1.1-1.3.1">Single source of truth for mapping simplifies data management and ensures consistency.<a href="#appendix-A.1.1-1.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.1.1-1.4">
              <p id="appendix-A.1.1-1.4.1">Sharding/replication can address geographical distribution and performance needs.<a href="#appendix-A.1.1-1.4.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
<div id="drawbacks">
<section id="appendix-A.1.2">
          <h4 id="name-drawbacks">
<a href="#appendix-A.1.2" class="section-number selfRef">A.1.2. </a><a href="#name-drawbacks" class="section-name selfRef">Drawbacks</a>
          </h4>
<ul class="normal">
<li class="normal" id="appendix-A.1.2-1.1">
              <p id="appendix-A.1.2-1.1.1">Centralization of sensitive user data raises privacy risks.<a href="#appendix-A.1.2-1.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.1.2-1.2">
              <p id="appendix-A.1.2-1.2.1">May conflict with data localization regulations.<a href="#appendix-A.1.2-1.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.1.2-1.3">
              <p id="appendix-A.1.2-1.3.1">Single point of failure vulnerability from outages affecting the entire system.<a href="#appendix-A.1.2-1.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.1.2-1.4">
              <p id="appendix-A.1.2-1.4.1">Potential difficulty with immediate global updates for rapidly changing mappings.<a href="#appendix-A.1.2-1.4.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="hierarchical-dps-discovery-resolvers">
<section id="appendix-A.2">
        <h3 id="name-hierarchical-dps-discovery-">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-hierarchical-dps-discovery-" class="section-name selfRef">Hierarchical DPs (Discovery Resolvers)</a>
        </h3>
<p id="appendix-A.2-1">A global root Discovery Provider (DP) directs mapping requests to authoritative DPs based on CSI structure (e.g., country codes for E.164 phone numbers) or sharding mechanisms. The root DP, similar to hierarchical DNS, acts as a directory service, holding pointers to authoritative DPs rather than mappings themselves. Alternatives to hierarchical resolution, like the LoST protocol <span>[<a href="#RFC5222" class="cite xref">RFC5222</a>]</span>, or distributed hash tables (DHTs), can achieve similar outcomes.<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
<div id="advantages-1">
<section id="appendix-A.2.1">
          <h4 id="name-advantages-2">
<a href="#appendix-A.2.1" class="section-number selfRef">A.2.1. </a><a href="#name-advantages-2" class="section-name selfRef">Advantages</a>
          </h4>
<ul class="normal">
<li class="normal" id="appendix-A.2.1-1.1">
              <p id="appendix-A.2.1-1.1.1">Scalability from distributed load and mapping management across multiple DPs.<a href="#appendix-A.2.1-1.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.2.1-1.2">
              <p id="appendix-A.2.1-1.2.1">Flexibility that allows different DPs to specialize in specific CSI ranges for regions.<a href="#appendix-A.2.1-1.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.2.1-1.3">
              <p id="appendix-A.2.1-1.3.1">Better alignment with data localization requirements.<a href="#appendix-A.2.1-1.3.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
<div id="drawbacks-1">
<section id="appendix-A.2.2">
          <h4 id="name-drawbacks-2">
<a href="#appendix-A.2.2" class="section-number selfRef">A.2.2. </a><a href="#name-drawbacks-2" class="section-name selfRef">Drawbacks</a>
          </h4>
<ul class="normal">
<li class="normal" id="appendix-A.2.2-1.1">
              <p id="appendix-A.2.2-1.1.1">Requires coordination and maintenance of hierarchy.<a href="#appendix-A.2.2-1.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.2.2-1.2">
              <p id="appendix-A.2.2-1.2.1">Root DP failure could disrupt the entire system.<a href="#appendix-A.2.2-1.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.2.2-1.3">
              <p id="appendix-A.2.2-1.3.1">Potential delays due to additional hops in the discovery process.<a href="#appendix-A.2.2-1.3.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="federated-dps-distributed-peer-service">
<section id="appendix-A.3">
        <h3 id="name-federated-dps-distributed-p">
<a href="#appendix-A.3" class="section-number selfRef">A.3. </a><a href="#name-federated-dps-distributed-p" class="section-name selfRef">Federated DPs (Distributed Peer Service)</a>
        </h3>
<p id="appendix-A.3-1">In a federated model, multiple independent DPs collaborate to provide CSI mapping discovery. Each DP holds a subset of mappings and pointers to other DPs, with no central authority dictating mapping locations. Discovering all mappings for a CSI may involve querying multiple DPs. DPs can exchange CSI information or recursively query each other. The specifics of DP federation are determined by business agreements, not technical requirements. A variation of this model involves messaging platforms acting as their own DPs, managing mappings for their users.<a href="#appendix-A.3-1" class="pilcrow">¶</a></p>
<div id="advantages-2">
<section id="appendix-A.3.1">
          <h4 id="name-advantages-3">
<a href="#appendix-A.3.1" class="section-number selfRef">A.3.1. </a><a href="#name-advantages-3" class="section-name selfRef">Advantages</a>
          </h4>
<ul class="normal">
<li class="normal" id="appendix-A.3.1-1.1">
              <p id="appendix-A.3.1-1.1.1">Decentralization ensures there is no single point of control or failure. The system can continue functioning even if some DPs are unavailable.<a href="#appendix-A.3.1-1.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.3.1-1.2">
              <p id="appendix-A.3.1-1.2.1">Mappings can be distributed according to local regulations.<a href="#appendix-A.3.1-1.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
<div id="drawbacks-2">
<section id="appendix-A.3.2">
          <h4 id="name-drawbacks-3">
<a href="#appendix-A.3.2" class="section-number selfRef">A.3.2. </a><a href="#name-drawbacks-3" class="section-name selfRef">Drawbacks</a>
          </h4>
<ul class="normal">
<li class="normal" id="appendix-A.3.2-1.1">
              <p id="appendix-A.3.2-1.1.1">Discovery process may involve querying multiple DPs, increasing network load.<a href="#appendix-A.3.2-1.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.3.2-1.2">
              <p id="appendix-A.3.2-1.2.1">Potential for bias as DPs may prioritize their own mappings, leading to uneven results.<a href="#appendix-A.3.2-1.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.3.2-1.3">
              <p id="appendix-A.3.2-1.3.1">Requires robust mechanisms to prevent CSI impersonation and ensure trust between DPs.<a href="#appendix-A.3.2-1.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-A.3.2-1.4">
              <p id="appendix-A.3.2-1.4.1">Pairwise relationships in a federated DP model could create a barrier to entry for smaller MSP/DPs, similar to the trust requirements in the DKIM <span>[<a href="#RFC6376" class="cite xref">RFC6376</a>]</span> and DMARC <span>[<a href="#RFC8616" class="cite xref">RFC8616</a>]</span> ecosystems.<a href="#appendix-A.3.2-1.4.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="additional-considerations-on-architectural-models">
<section id="appendix-A.4">
        <h3 id="name-additional-considerations-o">
<a href="#appendix-A.4" class="section-number selfRef">A.4. </a><a href="#name-additional-considerations-o" class="section-name selfRef">Additional Considerations on Architectural Models</a>
        </h3>
<div id="telephone-number-csis">
<section id="appendix-A.4.1">
          <h4 id="name-telephone-number-csis">
<a href="#appendix-A.4.1" class="section-number selfRef">A.4.1. </a><a href="#name-telephone-number-csis" class="section-name selfRef">Telephone Number CSIs</a>
          </h4>
<p id="appendix-A.4.1-1">Telephone number portability is complex due to its reliance on real-time queries to proprietary and legacy systems. Overall, the authenticated mappings proposed for MIMI may necessitate additional platform measures to assess mapping freshness and ensure up-to-date reachability responses.<a href="#appendix-A.4.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="bias-mitigation">
<section id="appendix-A.4.2">
          <h4 id="name-bias-mitigation">
<a href="#appendix-A.4.2" class="section-number selfRef">A.4.2. </a><a href="#name-bias-mitigation" class="section-name selfRef">Bias Mitigation</a>
          </h4>
<p id="appendix-A.4.2-1">Bias occurs when a DP prioritizes mappings to its affiliated MSP without consideration of what is best for end users. Mitigating bias is essential to ensure fair and equitable discovery of authenticated mappings across different services. The working group has decided to defer such mitigation to policies and regulations, excluding it from the discovery protocol.<a href="#appendix-A.4.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="recipients-critical-user-journeys">
<section id="appendix-B">
      <h2 id="name-recipients-critical-user-jo">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-recipients-critical-user-jo" class="section-name selfRef">Recipient's Critical User Journeys</a>
      </h2>
<p id="appendix-B-1">Here are some Critical User Journeys (CUJs) that are the most important to discovery recipients.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<p id="appendix-B-2">In the CUJs below, Bob is the recipient that creates verifiable mappings, and Alice is the sender or user performing discovery:<a href="#appendix-B-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="appendix-B-3">
<li id="appendix-B-3.1">
          <p id="appendix-B-3.1.1">Sender mapping preferences: Bob only wants to be found by Alice and other users on WhatsApp, not his other messaging apps.<a href="#appendix-B-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="appendix-B-3.2">
          <p id="appendix-B-3.2.1">Same-app preferences: Bob prefers that Alice can find him on the same messaging service that she is using. In other words, Bob does not want cross-app discovery and messaging.<a href="#appendix-B-3.2.1" class="pilcrow">¶</a></p>
</li>
        <li id="appendix-B-3.3">
          <p id="appendix-B-3.3.1">No-random mapping preferences: Bob does not want to go through multiple apps to find a message from Alice when discovery returns one of 10 mappings that Bob has established with discovery providers.<a href="#appendix-B-3.3.1" class="pilcrow">¶</a></p>
</li>
        <li id="appendix-B-3.4">
          <p id="appendix-B-3.4.1">No-duplication preferences: Bob does not want Alice's messages to be broadcasted to all or a subset of his apps based on the result of discovery.<a href="#appendix-B-3.4.1" class="pilcrow">¶</a></p>
</li>
        <li id="appendix-B-3.5">
          <p id="appendix-B-3.5.1">Per-sender preferences: Bob wants to control which app messages from Alice go to and do the same for other users (e.g., Carol's messages may go to a different app than Alice's).<a href="#appendix-B-3.5.1" class="pilcrow">¶</a></p>
</li>
        <li id="appendix-B-3.6">
          <p id="appendix-B-3.6.1">Closed group preferences: Bob only wants his soccer parents to discover and contact him on WhatsApp, not his Wire app. That is, a group of senders has the same mapping results based on Bob's preferences.<a href="#appendix-B-3.6.1" class="pilcrow">¶</a></p>
</li>
        <li id="appendix-B-3.7">
          <p id="appendix-B-3.7.1">Open-ended group preferences: Bob wants his business contacts to discover and reach him on Wire, not WhatsApp. That is, an open-ended list of senders (i.e., including leads) are provided with a designated mapping.<a href="#appendix-B-3.7.1" class="pilcrow">¶</a></p>
</li>
      </ol>
</section>
</div>
<div id="protecting-sender-recipient-social-graph-edge">
<section id="appendix-C">
      <h2 id="name-protecting-sender-recipient">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-protecting-sender-recipient" class="section-name selfRef">Protecting Sender-Recipient Social Graph Edge</a>
      </h2>
<p id="appendix-C-1">To protect user privacy, implementations should consider:<a href="#appendix-C-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="appendix-C-2">
<li id="appendix-C-2.1">
          <p id="appendix-C-2.1.1">Sender Identity Protection: This approach focuses on concealing the sender's identity from the Discovery Provider (DP). Techniques like IP blinding (e.g., using a Private Relay) can be employed to achieve this, ensuring the DP only learns the recipient's CSI.<a href="#appendix-C-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="appendix-C-2.2">
          <p id="appendix-C-2.2.1">Recipient Identity Protection: This approach aims to hide the recipient's CSI from the DP. Methods like Private Information Retrieval (PIR) or Private Set Membership (PSM) allow the sender to perform the lookup without revealing the recipient's information to the DP, effectively limiting the DP's knowledge to the sender's identity.<a href="#appendix-C-2.2.1" class="pilcrow">¶</a></p>
</li>
      </ol>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-D">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-D-1">We gratefully acknowledge the valuable feedback and constructive discussions received within the working group, in individual conversations, and during the MIMI interim meetings, as well as IETF 119, 120, and 121.<a href="#appendix-D-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-E">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Giles Hogben</span></div>
<div dir="auto" class="left"><span class="org">Google</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:gih@google.com" class="email">gih@google.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Femi Olumofin</span></div>
<div dir="auto" class="left"><span class="org">Google</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:fgolu@google.com" class="email">fgolu@google.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jon Peterson</span></div>
<div dir="auto" class="left"><span class="org">TransUnion</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jon.peterson@transunion.com" class="email">jon.peterson@transunion.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jonathan Rosenberg</span></div>
<div dir="auto" class="left"><span class="org">Five9</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jdrosen@jdrosen.net" class="email">jdrosen@jdrosen.net</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
